---
RecipeFormatVersion: 2020-01-25
ComponentName: aws.sagemaker.edgeManagerPythonClient
ComponentVersion: 0.1.15
ComponentDescription: Deploys Sagemaker Edge Manager Python client
ComponentPublisher: Amazon Web Services, Inc.
ComponentConfiguration:
  DefaultConfiguration:
    accessControl:
      aws.greengrass.ipc.mqttproxy:
        "aws.sagemaker.edgemanagerPythonClient:pubsub:1":
          policyDescription: Allows access to publish to em/inference
          operations:
            - "aws.greengrass#PublishToIoTCore"
          resources:
            - "em/inference"
ComponentDependencies:
  aws.greengrass.TokenExchangeService:
    VersionRequirement: '>=0.0.0'
    DependencyType: HARD
  aws.sagemaker.edgeManager:
    VersionRequirement: '~0.1.0'
    DependencyType: HARD
  com.model.keras:
    VersionRequirement: '~0.1.0'
    DependencyType: HARD
Manifests:
  - Platform:
      os: linux
      architecture: aarch64
    Lifecycle:
      run:
        script: |-
          pip3 install --upgrade grpcio-tools numpy protobuf grpcio opencv-python
          sleep 5 && python3 {artifacts:path}/edge_manager_python_client.py {artifacts:path}/rush_hour.jpg
    Artifacts:
      - URI: s3://123-waltrsd-gg-components/artifacts/aws.sagemaker.edgeManagerPythonClient/0.1.15/edge_manager_python_client.py
        Permission:
          Execute: OWNER
      - URI: s3://123-waltrsd-gg-components/artifacts/aws.sagemaker.edgeManagerPythonClient/0.1.15/agent_pb2.py
        Permission:
          Execute: OWNER
      - URI: s3://123-waltrsd-gg-components/artifacts/aws.sagemaker.edgeManagerPythonClient/0.1.15/agent_pb2_grpc.py
        Permission:
          Execute: OWNER
      - URI: s3://123-waltrsd-gg-components/artifacts/aws.sagemaker.edgeManagerPythonClient/0.1.15/rush_hour.jpg
        Permission:
          Execute: OWNER
      - URI: s3://123-waltrsd-gg-components/artifacts/aws.sagemaker.edgeManagerPythonClient/0.1.15/rush_hour.jpg.license
        Permission:
          Execute: OWNER